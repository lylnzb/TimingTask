<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lylBlog.common.mapper.CommonMapper">

    <!-- 根据编码类别查询字典 -->
    <select id="queryCodeValue" resultType="com.lylBlog.admin.bean.DictDataBean" parameterType="String">
        SELECT * FROM (
            SELECT
                    roleid AS dictvalue,
                    rolename AS dictlabel,
                    (case when rolekey = 'common' then 'Y' else 'N' end) as isdefault
            FROM
                    ( SELECT t.*, 'role' AS dict_type FROM m_role t ) AS m_role
            WHERE dict_type = #{dictType} AND valid = '1'
             UNION ALL
            SELECT
                    dict_value AS dictvalue,
                    dict_label AS dictlabel,
                    is_default as isdefault
            FROM
                    sys_dict_data
            WHERE dict_type = #{dictType} AND valid = '1'
        ) aa ORDER BY isdefault
    </select>
</mapper>
